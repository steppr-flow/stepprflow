import{u as b,o as w,b as l,c as o,d as e,m as p,v as _,B as C,g as d,F as m,r as g,j as N,e as V,w as F,t as a,T as j,A as T,k as x,h as A,p as B}from"./index-joplyjTx.js";const L={class:"space-y-6"},S={class:"card-compact flex flex-wrap items-center gap-3"},W={key:0,class:"card text-center text-sm text-gray-400 py-12"},I={class:"grid gap-4 lg:grid-cols-2"},M=["onClick"],E={class:"flex items-start justify-between"},$={class:"min-w-0"},z={class:"truncate text-sm font-semibold text-gray-900"},D={class:"text-xs text-gray-500"},U={key:0,class:"mt-1 text-xs text-gray-500"},q={class:"mt-3 flex items-center gap-4 text-xs text-gray-500"},G={key:1,class:"mt-2 flex flex-wrap gap-1"},H={key:0,class:"fixed inset-0 z-50 flex items-center justify-center"},J={class:"relative z-10 w-full max-w-lg max-h-[80vh] overflow-auto rounded-xl bg-white p-6 shadow-2xl"},K={class:"flex items-center justify-between mb-4"},O={class:"text-lg font-semibold text-gray-900"},P={class:"text-sm text-gray-500"},Q={key:0,class:"space-y-2"},R={class:"flex h-7 w-7 items-center justify-center rounded-full bg-primary-100 text-xs font-semibold text-primary-700"},X={class:"min-w-0"},Y={class:"text-sm font-medium text-gray-900"},Z={key:0,class:"text-xs text-gray-500"},ee={key:1,class:"text-sm text-gray-400"},le={__name:"Workflows",setup(te){const y=b(),c=x(""),u=x(""),v=x(""),r=x(null),f=A(()=>y.workflows.filter(i=>!(c.value&&!i.topic?.toLowerCase().includes(c.value.toLowerCase())||u.value&&!i.serviceName?.toLowerCase().includes(u.value.toLowerCase())||v.value&&i.status!==v.value)));function h(){c.value="",u.value="",v.value=""}function k(i){r.value=i}return w(()=>{y.fetchWorkflows()}),(i,s)=>(l(),o("div",L,[s[7]||(s[7]=e("h1",{class:"text-2xl font-bold text-gray-900"},"Workflows",-1)),e("div",S,[p(e("input",{"onUpdate:modelValue":s[0]||(s[0]=t=>c.value=t),class:"input max-w-[200px]",placeholder:"Filter by topic..."},null,512),[[_,c.value]]),p(e("input",{"onUpdate:modelValue":s[1]||(s[1]=t=>u.value=t),class:"input max-w-[200px]",placeholder:"Filter by service..."},null,512),[[_,u.value]]),p(e("select",{"onUpdate:modelValue":s[2]||(s[2]=t=>v.value=t),class:"select max-w-[160px]"},[...s[5]||(s[5]=[e("option",{value:""},"All statuses",-1),e("option",{value:"ACTIVE"},"Active",-1),e("option",{value:"INACTIVE"},"Inactive",-1)])],512),[[C,v.value]]),e("button",{class:"btn-secondary btn-sm ml-auto",onClick:h},"Clear")]),f.value.length===0?(l(),o("div",W," No workflows found ")):d("",!0),e("div",I,[(l(!0),o(m,null,g(f.value,t=>(l(),o("div",{key:t.topic+t.serviceName,class:"card cursor-pointer transition-shadow hover:shadow-md",onClick:n=>k(t)},[e("div",E,[e("div",$,[e("h3",z,a(t.topic),1),e("p",D,a(t.serviceName),1)]),t.status?(l(),o("span",{key:0,class:B(["inline-flex items-center rounded-full px-2 py-0.5 text-xs font-medium",t.status==="ACTIVE"?"bg-emerald-100 text-emerald-700":"bg-gray-100 text-gray-600"])},a(t.status),3)):d("",!0)]),t.description?(l(),o("p",U,a(t.description),1)):d("",!0),e("div",q,[e("span",null,a(t.steps?.length??"?")+" steps",1)]),t.registeredServices?.length?(l(),o("div",G,[(l(!0),o(m,null,g(t.registeredServices,n=>(l(),o("span",{key:n,class:"rounded bg-gray-100 px-1.5 py-0.5 text-xs text-gray-600"},a(n),1))),128))])):d("",!0)],8,M))),128))]),(l(),N(T,{to:"body"},[V(j,{name:"modal"},{default:F(()=>[r.value?(l(),o("div",H,[e("div",{class:"fixed inset-0 bg-black/40",onClick:s[3]||(s[3]=t=>r.value=null)}),e("div",J,[e("div",K,[e("div",null,[e("h2",O,a(r.value.topic),1),e("p",P,a(r.value.serviceName),1)]),e("button",{class:"flex h-8 w-8 items-center justify-center rounded-lg text-gray-400 hover:bg-gray-100 hover:text-gray-600",onClick:s[4]||(s[4]=t=>r.value=null)},[...s[6]||(s[6]=[e("svg",{class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),r.value.steps?.length?(l(),o("div",Q,[(l(!0),o(m,null,g(r.value.steps,(t,n)=>(l(),o("div",{key:n,class:"flex items-center gap-3 rounded-lg border border-gray-100 p-3"},[e("div",R,a(n+1),1),e("div",X,[e("p",Y,a(t.name||t.label||`Step ${n+1}`),1),t.description?(l(),o("p",Z,a(t.description),1)):d("",!0)])]))),128))])):(l(),o("p",ee,"No step details available"))])])):d("",!0)]),_:1})]))]))}};export{le as default};
